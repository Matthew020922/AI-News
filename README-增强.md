# AI日报系统增强版

## 系统增强概述

我们对AI日报系统进行了全面增强，主要改进包括：

1. **RSS源增强**：
   - 优化了RSS源配置，确保从AI寒武纪、腾讯科技和Founder Park获取高质量内容
   - 为每个RSS源添加了名称属性，便于日志跟踪和错误诊断
   - 增强了RSS解析器配置，添加超时设置和User-Agent

2. **内容处理改进**：
   - 增强HTML内容处理能力，更好地清理HTML标签
   - 改进内容长度控制，确保每条新闻内容不超过300字
   - 优化关键词提取算法，使用豆包API提取2-3个专业关键词
   - 增强AI摘要生成，每条信息点不超过30字，并添加随机表情

3. **日志系统**：
   - 新增完整的日志系统，记录所有操作和错误
   - 分离访问日志和错误日志，便于问题诊断
   - 为所有关键操作添加详细日志记录

4. **错误处理**：
   - 改进各种异常情况的处理，如内容为空、日期格式错误等
   - 添加内容长度检测和备选处理方案
   - 增加对不同RSS格式的兼容性处理

5. **API增强**：
   - 优化API端点的错误处理和日志记录
   - 添加更详细的状态信息和成功/失败反馈

6. **界面改进**：
   - 创建简单的重定向页面，方便访问
   - 提供更好的用户体验

7. **系统管理**：
   - 创建控制脚本(ai-report.sh)，方便启动、停止和重启服务
   - 添加手动生成报告的便捷命令

## 使用方法

### 启动服务器

```bash
./ai-report.sh start
```

### 查看服务器状态

```bash
./ai-report.sh status
```

### 手动生成新报告

```bash
./ai-report.sh generate
```

### 停止服务器

```bash
./ai-report.sh stop
```

### Web访问

通过浏览器访问：
```
http://localhost:3000/redirect.html
```

### API端点

1. 获取当前日报：
   ```
   http://localhost:3000/api/current-report
   ```

2. 获取归档日报列表：
   ```
   http://localhost:3000/api/archived-reports
   ```

3. 手动触发日报生成：
   ```
   curl -X POST http://localhost:3000/api/generate-report
   ```

## 日志查看

- 服务器日志：`server.log`
- 访问日志：`logs/access.log`
- 错误日志：`logs/error.log`

## 系统配置

系统配置在`server.js`文件中，主要配置项包括：

- RSS源列表：可以添加、删除或修改RSS源
- 关键词列表：可调整AI相关关键词、高优先级关键词和排除关键词
- 日报生成频率：通过cron配置修改自动生成时间

## 注意事项

1. 确保NodeJS环境正确安装
2. 端口3000必须可用
3. 第一次生成报告可能需要较长时间，请耐心等待
4. 日志文件不会自动清理，长期运行请注意磁盘空间 